define("BarCode",["require","exports","JsBarcode"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function i(t,e,n){this.init(),this.draw(t,e,n)}return i.prototype.init=function(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.id="tempSvg",document.body.appendChild(this.svg)},i.prototype.draw=function(t,e,n){r("#tempSvg",n.codeData,{lineColor:"#000000",width:3===n.codeType?2:1,height:e.h,margin:0,displayValue:!1,format:i.CodeType[n.codeType]}),this.svg.setAttribute("x",""+e.x),this.svg.setAttribute("y",""+e.y),document.body.removeChild(this.svg),t.appendChild(this.svg)},i.CodeType={0:"ITF",3:"CODE39",4:"CODE39",5:"CODE128A",6:"CODE128B",7:"CODE128C"},i}();e.BarCode=n}),define("Draw",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function c(t){var e,n;this.shapeKindFun=((e=[])[c.graphKind.rectangle]=function(t,e,n){if(t.save(),n.angle){var i=void 0;i=e.h?{x:e.x+e.w/2,y:e.y+e.h/2}:{x:e.x+e.w/2,y:e.y+e.w/2},t.translate(i.x,i.y),t.rotate(n.angle),t.translate(-i.x,-i.y)}6==n.penStyle?(t.beginPath(),t.moveTo(e.x+n.penWidth,e.y+n.penWidth),t.lineTo(e.x+e.w-n.penWidth,e.y+n.penWidth),e.h?t.lineTo(e.x+e.w-n.penWidth,e.y+e.h-n.penWidth):t.lineTo(e.x+e.w-n.penWidth,e.y+e.w-n.penWidth),e.h?t.lineTo(e.x+n.penWidth,e.y+e.h-n.penWidth):t.lineTo(e.x+n.penWidth,e.y+e.w-n.penWidth),t.lineTo(e.x+n.penWidth,e.y+n.penWidth),c.brushStyleFun.brush(t,n),t.lineWidth=1,t.fill(),t.stroke(),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x+e.w,e.y),t.lineTo(e.x+e.w,e.y+e.h),t.lineTo(e.x,e.y+e.h),t.lineTo(e.x,e.y),t.lineWidth=1):(t.beginPath(),t.moveTo(e.x+n.penWidth/2,e.y+n.penWidth/2),t.lineTo(e.x+e.w-n.penWidth/2,e.y+n.penWidth/2),e.h?t.lineTo(e.x+e.w-n.penWidth/2,e.y+e.h-n.penWidth/2):t.lineTo(e.x+e.w-n.penWidth/2,e.y+e.w-n.penWidth/2),e.h?t.lineTo(e.x+n.penWidth/2,e.y+e.h-n.penWidth/2):t.lineTo(e.x+n.penWidth/2,e.y+e.w-n.penWidth/2),t.lineTo(e.x+n.penWidth/2,e.y+n.penWidth/2),c.brushStyleFun.brush(t,n),t.fill()),t.stroke(),t.restore()},e[c.graphKind.circle]=function(t,e,n){var i;(t.save(),n.angle)&&(i={x:e.x,y:e.y},t.translate(i.x,i.y),t.rotate(n.angle),t.translate(-i.x,-i.y));if(e.h)if(6==n.penStyle){t.save();var r=e.w>e.h?e.w:e.h,o=e.w/r,l=e.h/r;t.scale(o,l),t.beginPath(),t.arc(e.x/o,e.y/l,r-n.penWidth,0,2*Math.PI,!1),c.brushStyleFun.brush(t,n),t.lineWidth=1,t.fill(),t.stroke(),t.beginPath(),t.arc(e.x/o,e.y/l,r,0,2*Math.PI,!1),t.stroke(),t.restore()}else t.save(),r=e.w>e.h?e.w:e.h,o=e.w/r,l=e.h/r,t.scale(o,l),t.beginPath(),t.arc(e.x/o,e.y/l,r-n.penWidth/2,0,2*Math.PI,!1),c.brushStyleFun.brush(t,n),t.fill(),t.stroke(),t.restore();else 6==n.penStyle?(t.beginPath(),t.arc(e.x,e.y,e.w-n.penWidth,0,2*Math.PI),c.brushStyleFun.brush(t,n),t.lineWidth=1,t.fill(),t.stroke(),t.beginPath(),t.arc(e.x,e.y,e.w,0,2*Math.PI),c.brushStyleFun.brush(t,n),t.lineWidth=1):(t.beginPath(),t.arc(e.x,e.y,e.w-n.penWidth/2,0,2*Math.PI),c.brushStyleFun.brush(t,n),t.fill()),t.stroke();t.restore()},e[c.graphKind.verticalLine]=function(t,e,n){t.save(),6==n.penStyle?(t.beginPath(),t.moveTo(e.x+.5,e.y+.5),t.lineTo(e.x+n.penWidth-.5,e.y+.5),t.lineTo(e.x+n.penWidth-.5,e.y+e.h-.5),t.lineTo(e.x+.5,e.y+e.h-.5),t.lineTo(e.x+.5,e.y+.5),c.brushStyleFun.brushLine(t,n),t.lineWidth=1):(t.beginPath(),t.moveTo(e.x+n.penWidth/2,e.y),t.lineTo(e.x+n.penWidth/2,e.y+e.h),c.brushStyleFun.brushLine(t,n)),t.stroke(),t.restore()},e[c.graphKind.line]=function(t,e,n){t.save(),6==n.penStyle?(t.beginPath(),t.moveTo(e.x+.5,e.y+.5),t.lineTo(e.x+e.w-.5,e.y+.5),t.lineTo(e.x+e.w-.5,e.y+n.penWidth-.5),t.lineTo(e.x+.5,e.y+n.penWidth-.5),t.lineTo(e.x+.5,e.y+.5),c.brushStyleFun.brushLine(t,n),t.lineWidth=1):(t.beginPath(),t.moveTo(e.x,e.y+n.penWidth/2),t.lineTo(e.x+e.w,e.y+n.penWidth/2),c.brushStyleFun.brushLine(t,n)),t.stroke(),t.restore()},e[c.graphKind.upAndDownParallelLine]=function(t,e,n){t.save(),t.beginPath(),t.moveTo(e.x,e.y+n.penWidth/2),t.lineTo(e.x+e.w,e.y+n.penWidth/2),t.moveTo(e.x,e.y+n.penWidth/2+e.h),t.lineTo(e.x+e.w,e.y+n.penWidth/2+e.h),c.brushStyleFun.brushLine(t,n),t.stroke(),t.restore()},e[c.graphKind.leftAndRightParallelLine]=function(t,e,n){t.save(),t.beginPath(),t.moveTo(e.x+n.penWidth/2,e.y),t.lineTo(e.x+n.penWidth/2,e.y+e.h),t.moveTo(e.x+n.penWidth/2+e.w,e.y),t.lineTo(e.x+n.penWidth/2+e.w,e.y+e.h),c.brushStyleFun.brushLine(t,n),t.stroke(),t.restore()},e),this.textStyleFun=((n=[]).backColor=function(t,e,n){t.save(),!0===n.transparent&&(t.globalAlpha=0),!1===n.transparent&&(t.globalAlpha=1),"number"==typeof n.transparent&&(t.globalAlpha=Number(n.transparent)),t.fillStyle="#"+n.backColor.toString(16),t.fillRect(0,0,e.w,e.h),t.restore()},n.font=function(t,e,n){t.fillStyle="#"+n.font.fontColor.toString(16),1===n.font.fontStyle?t.font="bolder "+n.font.fontSize+"px Source Han Sans CN":t.font=n.font.fontSize+"px Source Han Sans CN"},n.forFill=function(){},n.stretch=function(t,e,n){!n.autoSize&&n.stretch&&(t.font=e.h+"px "+n.font.fontName)},n),this.contains=function(t){for(var e=["dataName","alignment","autoSize","transparent","wrapping"],n=e.length;n--;)if(e[n]===t)return!0;return!1},this.init(t)}return c.prototype.init=function(t){this.canvas=document.createElement("canvas"),this.canvas.width=t.width*window.devicePixelRatio,this.canvas.height=t.height*window.devicePixelRatio,this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx=this.canvas.getContext("2d")},c.prototype.graph=function(t,e,n){n=G.tools.obj.merge(c.defaultPara.shapeDefaultPara,n),this.shapeKindFun[t].call(this,this.ctx,e,n)},c.prototype.text=function(t,e,n){if(t)if(t=t.replace(/null/g,""),n=G.tools.obj.merge(!0,c.defaultPara.textDefaultPara,n),e.w&&e.h){var i=document.createElement("canvas"),r=i.getContext("2d");for(var o in i.width=e.w,i.height=e.h,n)this.contains(o)||this.textStyleFun[o].call(this,r,e,n);r.textBaseline="top",this.drawText(t,r,e,n);var l=r.getImageData(0,0,i.width,i.height);this.ctx.putImageData(l,e.x,e.y)}else{for(var o in this.ctx.save(),n)this.contains(o)||this.textStyleFun[o].call(this,this.ctx,e,n);this.ctx.textBaseline="top",this.ctx.fillText(t,e.x,e.y),this.ctx.restore()}},c.prototype.getPng=function(){return this.canvas.toDataURL("image/png")},c.prototype.getCanvasCt=function(){return this.ctx},c.prototype.getCanvas=function(){return this.canvas},c.prototype.drawText=function(t,e,n,i){var r;if(i.wrapping&&e.measureText(t).width>n.w)if(1<(r=t.split("\r\n")).length)for(var o=0;o<r.length;o++)e.fillText(r[o],0,o*i.font.fontSize+5*o);else{for(var l=e.measureText(t).width,a=[],s=Math.floor(n.w/l*t.length),h=0;s==Math.floor(n.w/l*t.length);){var u=t.substring(h*Math.floor(n.w/l*t.length),(h+1)*Math.floor(n.w/l*t.length));a.push(u),h++,s=u.length}e.textAlign=c.alignMent[0];for(o=0;o<a.length;o++)e.fillText(a[o],0,o*i.font.fontSize+3*o)}else if(1<=(r=t.split("\r\n")).length)for(o=0;o<r.length;o++)e.fillText(r[o],0,o*i.font.fontSize+5*o);else e.textAlign=c.alignMent[i.alignment],0==i.alignment&&(n.w&&n.h?e.fillText(t,0,!i.autoSize&&i.stretch?0:(n.h-i.font.fontSize)/2):e.fillText(t,0,0)),1==i.alignment&&(n.w&&n.h?e.fillText(t,0+n.w,!i.autoSize&&i.stretch?0:(n.h-i.font.fontSize)/2):e.fillText(t,0,0)),2==i.alignment&&(n.w&&n.h?e.fillText(t,0+n.w/2,!i.autoSize&&i.stretch?0:(n.h-i.font.fontSize)/2):e.fillText(t,0,0))},c.toCanvas=function(t){var e;e='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" style="top:100px;" width="'+t.offsetWidth+'" height="'+t.offsetHeight+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">'+t.innerHTML+111111111111+"</div></foreignObject></svg>";var n=document.createElement("canvas");n.width=t.offsetWidth?t.offsetWidth:100,n.height=t.offsetHeight?t.offsetHeight:100;var i=n.getContext("2d"),r=new Image;return r.onload=function(){i.drawImage(r,0,0),console.log(n.toDataURL("image/png"))},r.onerror=function(){console.log("error")},r.src=e,n},c.defaultPara={textDefaultPara:{alignment:0,backColor:16777215,font:{fontName:"黑体",fontSize:7,fontColor:0,fontStyle:0},forFill:!1,autoSize:!0,stretch:!0,transparent:!1,wrapping:!1},shapeDefaultPara:{brushColor:0,brushStyle:0,penColor:0,penStyle:0,penWidth:1}},c.brushStyleFun={brush:function(t,e){var n=document.createElement("canvas");n.width=16,n.height=8;var i=n.getContext("2d");6!=e.penStyle&&t.setLineDash(c.lineStyle[e.penStyle]),i.strokeStyle="#"+e.brushColor.toString(16),t.strokeStyle="#"+e.penColor.toString(16),i.lineWidth=e.fillPenWidth?e.fillPenWidth:1,t.lineWidth=e.borderPenWidth?e.borderPenWidth:e.penWidth;var r=0,o=0,l=0,a=0;1==e.brushStyle?t.fillStyle="white":2==e.brushStyle?(n.width=16,n.height=6,i.strokeStyle="#"+e.brushColor.toString(16),i.beginPath(),i.moveTo(0,3),i.lineTo(16,3),i.stroke(),t.fillStyle=t.createPattern(n,"repeat")):3==e.brushStyle?(n.width=6,n.height=16,i.strokeStyle="#"+e.brushColor.toString(16),i.beginPath(),i.moveTo(3,0),i.lineTo(3,16),i.closePath(),i.stroke(),t.fillStyle=t.createPattern(n,"repeat")):4==e.brushStyle?(r=-2,l=18,o=-1,a=9,i.beginPath(),i.moveTo(r,o),i.lineTo(l,a),i.moveTo(r-16,o),i.lineTo(l-16,a),i.moveTo(r+16,o),i.lineTo(l+16,a),i.stroke(),t.fillStyle=t.createPattern(n,"repeat")):5==e.brushStyle?(r=18,l=-2,o=-1,a=9,i.beginPath(),i.moveTo(r,o),i.lineTo(l,a),i.moveTo(r-16,o),i.lineTo(l-16,a),i.moveTo(r+16,o),i.lineTo(l+16,a),i.stroke(),t.fillStyle=t.createPattern(n,"repeat")):6==e.brushStyle?(n.width=10,n.height=10,i.strokeStyle="#"+e.brushColor.toString(16),i.beginPath(),i.moveTo(0,5),i.lineTo(10,5),i.moveTo(5,0),i.lineTo(5,10),i.stroke(),t.fillStyle=t.createPattern(n,"repeat")):7==e.brushStyle?(r=-2,l=18,o=-1,a=9,i.strokeStyle="#"+e.brushColor.toString(16),i.lineWidth=e.penWidth,i.beginPath(),i.moveTo(r,o),i.lineTo(l,a),i.moveTo(r-16,o),i.lineTo(l-16,a),i.moveTo(r+16,o),i.lineTo(l+16,a),i.stroke(),r=18,l=-2,o=-1,a=9,i.beginPath(),i.moveTo(r,o),i.lineTo(l,a),i.moveTo(r-16,o),i.lineTo(l-16,a),i.moveTo(r+16,o),i.lineTo(l+16,a),i.stroke(),t.fillStyle=t.createPattern(n,"repeat")):t.fillStyle="#"+e.penColor.toString(16)},brushLine:function(t,e){6!=e.penStyle&&t.setLineDash(c.lineStyle[e.penStyle]),t.lineWidth=e.penWidth,t.strokeStyle="#"+e.penColor.toString(16)}},c.lineStyle={0:[],1:[5,5],2:[2,2],3:[10,10,4,10],4:[30,10,4,10,4,10],5:[0,1e3]},c.graphKind={rectangle:0,circle:1,verticalLine:2,line:3,upAndDownParallelLine:4,leftAndRightParallelLine:5},c.alignMent={0:"left",1:"right",2:"center"},c}();e.Draw=n}),define("DrawSvg",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function h(t){var e,s,n,i;this.defsColor=[],this.drawText={drawWHText:function(t,e,n,i){t.setAttribute("x",""+i.x),t.setAttribute("y",""+i.y),t.setAttribute("width",""+i.w),t.setAttribute("height",""+i.h),t.setAttribute("dominant-baseline","text-before-edge");var r=e.split("\r\n"),o="";if(1<r.length){for(var l=0;l<r.length;l++)o+="<tspan xml:space='preserve' x=\""+i.x+'" dy="'+(l*n.font.fontSize+3)+'">'+r[l]+"</tspan>";t.innerHTML=o}else-1<e.indexOf(" ")&&(e=e.replace(/\s/g,"&ensp;")),t.innerHTML=e},drawNotWHText:function(t,e,n,i){t.setAttribute("x",""+i.x),t.setAttribute("y",""+i.y),t.setAttribute("dominant-baseline","text-before-edge"),-1<e.indexOf(" ")&&(e=e.replace(/\s/g,"&ensp;")),t.innerHTML=e}},this.textStyleFun=((e=[]).font=function(t,e){1===e.font.fontStyle&&t.setAttribute("font-weight","bold"),t.setAttribute("font-size",e.font.fontSize+"px"),t.setAttribute("font-family",""+e.font.fontName),t.setAttribute("fill","#"+e.font.fontColor.toString(16))},e.hasWHSty=function(t,e,n){e.transparent&&t.setAttribute("opacity","0"),"number"==typeof e.transparent&&t.setAttribute("opacity",""+Number(e.transparent)),t.setAttribute("style","text-align:"+h.alignMent[e.alignment]+";"),!e.autoSize&&e.stretch&&t.setAttribute("font-size",n.h+"px"),e.autoSize&&(t.setAttribute("width",t.innerHTML.length*e.font.fontSize+"px"),t.setAttribute("height",e.font.fontSize+"px"))},e),this.shapeKindFun=(s=this,(n=[])[h.graphKind.rectangle]=function(t,e){var n,i=document.createElementNS(h.svgUrl,"rect"),r=null,o=e.brushColor?"#"+e.brushColor.toString(16):"black",l=e.penColor?"#"+e.penColor.toString(16):"black";n=0!==e.brushStyle&&1!==e.brushStyle?"fill:url(#"+h.fillKindNumber[e.brushStyle]+o+");stroke:"+l+";stroke-width:"+(6===e.penStyle?1:e.penWidth):"fill:"+(e.brushStyle?"white":o)+";stroke:"+l+";stroke-width:"+(6===e.penStyle?1:e.penWidth),6!==e.penStyle?(i.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle]),i.setAttribute("width",""+(t.w-e.penWidth)),i.setAttribute("height",""+(t.h-e.penWidth)),i.setAttribute("x",""+t.x),i.setAttribute("y",""+t.y)):((r=document.createElementNS(h.svgUrl,"rect")).setAttribute("width",""+t.w),r.setAttribute("height",""+t.h),r.setAttribute("x",""+t.x),r.setAttribute("y",""+t.y),r.setAttribute("style","fill:white;stroke:"+l+";stroke-width:1;"),i.setAttribute("width",""+(t.w-2*e.penWidth)),i.setAttribute("height",""+(t.h-2*e.penWidth)),i.setAttribute("x",""+(t.x+e.penWidth)),i.setAttribute("y",""+(t.y+e.penWidth))),i.setAttribute("style",n),r&&s.svg.appendChild(r),s.svg.appendChild(i)},n[h.graphKind.circle]=function(t,e){var n,i,r=e.brushColor?"#"+e.brushColor.toString(16):"black",o=e.penColor?"#"+e.penColor.toString(16):"black",l=null;if(i=0!==e.brushStyle&&1!==e.brushStyle?"fill:url(#"+h.fillKindNumber[e.brushStyle]+r+");stroke:"+o+";stroke-width:"+(6===e.penStyle?1:e.penWidth):"fill:"+(e.brushStyle?"white":r)+";stroke:"+o+";stroke-width:"+(6===e.penStyle?1:e.penWidth),t.w&&t.h&&t.w!==t.h)n=document.createElementNS(h.svgUrl,"ellipse"),6!==e.penStyle?(n.setAttribute("rx",""+(t.w/2-e.penWidth/2)),n.setAttribute("ry",""+(t.h/2-e.penWidth/2)),n.setAttribute("cx",""+(t.x+t.w/2)),n.setAttribute("cy",""+(t.y+t.h/2)),n.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle])):((l=document.createElementNS(h.svgUrl,"circle")).setAttribute("rx",""+t.w/2),l.setAttribute("ry",""+t.h/2),l.setAttribute("cx",""+(t.x+t.w/2)),l.setAttribute("cy",""+(t.y+t.h/2)),l.setAttribute("style","fill:white;stroke:"+o+";stroke-width:1;"),n.setAttribute("rx",""+(t.w/2-e.penWidth)),n.setAttribute("ry",""+(t.h/2-e.penWidth)),n.setAttribute("cx",""+(t.x+t.w/2)),n.setAttribute("cy",""+(t.y+t.h/2))),n.setAttribute("style",i),l&&s.svg.appendChild(l),s.svg.appendChild(n);else{n=document.createElementNS(h.svgUrl,"circle");var a=t.w?t.w/2:t.h/2;6!==e.penStyle?(n.setAttribute("r",""+(a-e.penWidth/2)),n.setAttribute("cx",""+(t.x+a)),n.setAttribute("cy",""+(t.y+a)),n.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle])):((l=document.createElementNS(h.svgUrl,"circle")).setAttribute("r",""+a),l.setAttribute("cx",""+(t.x+a)),l.setAttribute("cy",""+(t.y+a)),l.setAttribute("style","fill:white;stroke:"+o+";stroke-width:1;"),n.setAttribute("r",""+(a-e.penWidth)),n.setAttribute("cx",""+(t.x+a)),n.setAttribute("cy",""+(t.y+a)))}n.setAttribute("style",i),l&&s.svg.appendChild(l),s.svg.appendChild(n)},n[h.graphKind.verticalLine]=function(t,e){var n,i=document.createElementNS(h.svgUrl,"line"),r=null,o=e.penColor?"#"+e.penColor.toString(16):"black";n="stroke:"+o+";stroke-width:"+(6===e.penStyle?1:e.penWidth),6!==e.penStyle?(i.setAttribute("x1",""+t.x),i.setAttribute("y1",""+t.y),i.setAttribute("x2",""+t.x),i.setAttribute("y2",""+(t.y+t.h)),i.setAttribute("style",n),i.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle])):((r=document.createElementNS(h.svgUrl,"rect")).setAttribute("style","stroke:"+o+";stroke-width:1;"),r.setAttribute("x",""+t.x),r.setAttribute("y",""+t.y),r.setAttribute("width",""+e.penWidth),r.setAttribute("height",""+t.h),r.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle])),s.svg.appendChild(r||i)},n[h.graphKind.line]=function(t,e){var n,i=document.createElementNS(h.svgUrl,"line"),r=null,o=e.penColor?"#"+e.penColor.toString(16):"black";n="stroke:"+o+";stroke-width:"+(6===e.penStyle?1:e.penWidth),6!==e.penStyle?(i.setAttribute("x1",""+t.x),i.setAttribute("y1",""+t.y),i.setAttribute("x2",""+(t.x+t.w)),i.setAttribute("y2",""+t.y),i.setAttribute("style",n),i.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle])):((r=document.createElementNS(h.svgUrl,"rect")).setAttribute("style","stroke:"+o+";stroke-width:1;"),r.setAttribute("x",""+t.x),r.setAttribute("y",""+t.y),r.setAttribute("width",""+t.w),r.setAttribute("height",""+e.penWidth),r.setAttribute("stroke-dasharray",h.lineStyle[e.penStyle])),s.svg.appendChild(r||i)},n[h.graphKind.upAndDownParallelLine]=function(t,e){var n,i=document.createElementNS(h.svgUrl,"line"),r=document.createElementNS(h.svgUrl,"line");n="stroke:"+(e.penColor?"#"+e.penColor.toString(16):"black")+";stroke-width:"+e.penWidth,i.setAttribute("x1",""+t.x),i.setAttribute("y1",""+t.y),i.setAttribute("x2",""+(t.x+t.w)),i.setAttribute("y2",""+t.y),i.setAttribute("style",""+n),r.setAttribute("x1",""+t.x),r.setAttribute("y1",""+(t.y+t.h)),r.setAttribute("x2",""+(t.x+t.w)),r.setAttribute("y2",""+(t.y+t.h)),r.setAttribute("style",""+n),s.svg.appendChild(i),s.svg.appendChild(r)},n[h.graphKind.leftAndRightParallelLine]=function(t,e){var n,i=document.createElementNS(h.svgUrl,"line"),r=document.createElementNS(h.svgUrl,"line");n="stroke:"+(e.penColor?"#"+e.penColor.toString(16):"black")+";stroke-width:"+e.penWidth,i.setAttribute("x1",""+t.x),i.setAttribute("y1",""+t.y),i.setAttribute("x2",""+t.x),i.setAttribute("y2",""+(t.y+t.h)),i.setAttribute("style",""+n),r.setAttribute("x1",""+(t.x+t.w)),r.setAttribute("y1",""+t.y),r.setAttribute("x2",""+(t.x+t.w)),r.setAttribute("y2",""+(t.y+t.h)),r.setAttribute("style",""+n),s.svg.appendChild(i),s.svg.appendChild(r)},n),this.shapeFillStyle=((i=[])[h.fillKind.shuiping]=function(t,e){"#0"===t&&(t="black");var n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML=' <pattern id="shuiping'+t+'" width="5" height="5" patternUnits="userSpaceOnUse">\n                                        <line x1="0" y1="2.5" x2="5" y2="2.5"  style="stroke:'+t+';stroke-width:1" />\n                                </pattern>',e.appendChild(n)},i[h.fillKind.chuizhi]=function(t,e){"#0"===t&&(t="black");var n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML=' <pattern id="chuizhi'+t+'" width="5" height="5" patternUnits="userSpaceOnUse">\n                                    <line x1="2.5" y1="0" x2="2.5" y2="5"  style="stroke:'+t+';stroke-width:1" />\n                                </pattern>',e.appendChild(n)},i[h.fillKind.youxie]=function(t,e){"#0"===t&&(t="black");var n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML=' <pattern id="youxie'+t+'" width="7" height="7" patternUnits="userSpaceOnUse">\n                                    <line x1="0" y1="0" x2="7" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="-7" y1="0" x2="0" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="7" y1="0" x2="14" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                </pattern>',e.appendChild(n)},i[h.fillKind.zuoxie]=function(t,e){"#0"===t&&(t="black");var n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML='  <pattern id="zuoxie'+t+'" width="7" height="7" patternUnits="userSpaceOnUse">\n                                    <line x1="7" y1="0" x2="0" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="0" y1="0" x2="-7" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="14" y1="0" x2="7" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                </pattern>',e.appendChild(n)},i[h.fillKind.fangge]=function(t,e){"#0"===t&&(t="black");var n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML='<pattern id="fangge'+t+'" width="5" height="5" patternUnits="userSpaceOnUse">\n                                <line x1="0" y1="2.5" x2="5" y2="2.5"  style="stroke:'+t+';stroke-width:1" />\n                                <line x1="2.5" y1="0" x2="2.5" y2="5"  style="stroke:'+t+';stroke-width:1" />\n                            </pattern>',e.appendChild(n)},i[h.fillKind.xiefangge]=function(t,e){"#0"===t&&(t="black");var n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML=' <pattern id="xiefangge'+t+'" width="7" height="7" patternUnits="userSpaceOnUse">\n                                    <line x1="0" y1="0" x2="7" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="-7" y1="0" x2="0" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="7" y1="0" x2="14" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="7" y1="0" x2="0" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="0" y1="0" x2="-7" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                    <line x1="14" y1="0" x2="7" y2="7"  style="stroke:'+t+';stroke-width:1" />\n                                </pattern>',e.appendChild(n)},i),this.init(t)}return h.prototype.graph=function(t,e,n){0!==n.brushStyle&&1!==n.brushStyle&&this.appendDefs(n),this.shapeKindFun[t].call(this,e,n)},h.prototype.text=function(t,e,n){if(t+="",e.w||e.h){0===e.h&&(e.h=n.font.fontSize);var i=n.wrapping?document.createElementNS(h.svgUrl,"foreignObject"):document.createElementNS(h.svgUrl,"text");this.drawText.drawWHText(i,t,n,e),this.textStyleFun.font.call(this,i,n),this.textStyleFun.hasWHSty.call(this,i,n,e),this.svg.appendChild(i)}else{i=document.createElementNS(h.svgUrl,"text");this.drawText.drawNotWHText(i,t,n,e),this.textStyleFun.font.call(this,i,n),this.svg.appendChild(i)}},h.prototype.icon=function(t,e){this.drawIcon(t,e)},h.prototype.getSvg=function(){return this.svg},h.prototype.init=function(t){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",""+t.width),this.svg.setAttribute("height",""+t.height)},h.prototype.drawIcon=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"height",""+e.h),n.setAttributeNS(null,"width",""+e.w),n.setAttributeNS("http://www.w3.org/1999/xlink","href","http://"+location.host+"/img/img/label/"+t+h.iconSuffix[t]),n.setAttributeNS(null,"x",""+e.x),n.setAttributeNS(null,"y",""+e.y),n.setAttributeNS(null,"visibility","visible"),this.svg.appendChild(n)},h.prototype.appendDefs=function(t){var e="#"+t.brushColor.toString(16);-1===this.defsColor.indexOf(e)&&(this.defsColor.push(e),this.shapeFillStyle[t.brushStyle].call(this,e,this.svg))},h.svgUrl="http://www.w3.org/2000/svg",h.lineStyle={0:"",1:"5,5",2:"2, 2",3:"10,10,4,10",4:"30,10,4,10,4,10",5:"0,1000"},h.graphKind={rectangle:0,circle:1,verticalLine:2,line:3,upAndDownParallelLine:4,leftAndRightParallelLine:5},h.fillKind={shixing:0,kongxin:1,shuiping:2,chuizhi:3,youxie:4,zuoxie:5,fangge:6,xiefangge:7},h.fillKindNumber=["shixing","kongxin","shuiping","chuizhi","youxie","zuoxie","fangge","xiefangge"],h.alignMent={0:"left",1:"right",2:"center"},h.iconSuffix={1:".bmp",2:".bpm",3:".gif",5e4:".bmp",50001:".bmp",9e4:".jpeg",90001:".jpeg"},h}();e.DrawSvg=n}),define("Echart",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=G.sys,i=function(){function t(){this.setDefault()}return t.prototype.setDefault=function(){this._title={text:"订单明细图",x:"center"},this._grid=n.isMb?{left:"1%",right:"6%",bottom:"30px",containLabel:!0}:{left:"1%",right:"15%",bottom:"3%",containLabel:!0},this.option={title:this._title,grid:this._grid}},Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.option.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend},set:function(t){this._legend=t,this.option.legend=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},set:function(t){this._grid=t,this.option.grid=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this._xAxis},set:function(t){this._xAxis=t,this.option.xAxis=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yAxis",{get:function(){return this._yAxis},set:function(t){this._yAxis=t,this.option.yAxis=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(t){this._series=t,this.option.series=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t,this.option.tooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataZoom",{get:function(){return this._dataZoom},set:function(t){this._dataZoom=t,this.option.dataZoom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.option.color=t},enumerable:!0,configurable:!0}),t.prototype.getOption=function(){return this.option},t}();e.Echart=i}),define("QrCode",["require","exports","QRCode"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){this.g=document.createElementNS("http://www.w3.org/2000/svg","g"),new r(this.g,{width:e.w,height:e.h,useSVG:!0}).makeCode(n.codeData);var i=this.g.firstChild;i.setAttribute("width",""+e.w),i.setAttribute("height",""+e.h),i.setAttribute("x",""+e.x),i.setAttribute("y",""+e.y),t.appendChild(this.g)},t}();e.QrCode=n}),define("statistic",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=G.tools,n=function(){function l(){this.colFormula=[],this.colIndexTemp=0,this.cols=[],this.dataTemp={},this.crossFunc=function(g){var y=0;function h(t,e,n){void 0===n&&(n={});for(var i=[],r=0,o=e;r<o.length;r++){var l=o[r];t.includes(l.name)&&i.push(a.obj.merge({title:l.title,name:l.name},n))}return i}function i(t){var e,n,i=t.row,r=t.col,o=t.val,l={cols:[],data:[]};for(var a in o=h(o,t.cols,{type:"val"}),e=h(i,t.cols),y=0,l.cols=function t(e,n,i){if(0<e.length){var r=e.shift(),o={},l=[];for(var a in i.forEach(function(t,e){o[t[r]]=o[t[r]]||{title:t[r],data:[]},o[t[r]].data.push(t)}),o)if(o.hasOwnProperty(a)){var s=t(e.concat(),n,o[a].data);if(s&&(1<s.length||s[0].children))l.push({title:o[a].title,name:r,children:s});else{var h=r;if(s&&1===s.length){var u=s[0].name;u=u.replace(/^.*?=/,""),h=r+"="+u}l.push({title:o[a].title,name:h})}}return l}if(n){var c=[];return n.forEach(function(t){c.push(G.tools.obj.merge(t,{name:t.name+"-"+y++}))}),c}}(r,o,t.data),g.colFormula=[],function i(t,r,o){if(void 0===o&&(o=[]),t)t.forEach(function(t,e){var n=o.concat();"val"!=t.type&&n.push({name:t.name,title:t.title}),i(t.children,r,n)});else{if(r&&0!==r.length){var e=void 0;g.colIndexTemp=g.colIndexTemp<r.length?g.colIndexTemp:0,(e=r[g.colIndexTemp]).group=g.colIndexTemp,o.push(e),g.colIndexTemp++}else o.push(null);g.colFormula.push(o)}}(l.cols,o),y=0,g.dataTemp={},function t(e,f,n,r,o,l){if(void 0===o&&(o=[]),void 0===l&&(l={}),0<e.length){var i=e.shift(),a={},s=[];for(var h in n.forEach(function(t,e){a[t[i]]=a[t[i]]||[],a[t[i]].push(t)}),a)if(a.hasOwnProperty(h)){var u=o.concat();u.push({name:i,title:h}),l[i]=h,s=s.concat(t(e.concat(),f,a[h],r,u,l))}return s}n.forEach(function(c,t){var e,p={},d=[],n=[];if(g.cols=[],console.log(1111,r),r.forEach(function(t,e){var n=!0,i=t[t.length-1],r=i.group,o=i.name,l=o+"-"+y,a=o+"_SUM";d[r]=d[r]||{name:""+a,title:0};for(var s=0,h=t.length-1;s<h;s++){var u=t[s].name;if(1===f.length&&~u.indexOf("=")&&(u=u.replace(/=.*?$/,"")),void 0===c[u]||c[u]!==t[s].title){n=!1;break}}1===f.length&&(l=t[t.length-2].name),n?(d[r].title+=c[o],p[l]=c[o],g.cols.push({name:l,title:c[o]})):(g.cols.push({name:l,title:"--"}),p[l]="--"),y++}),d.forEach(function(t,e){p[t.name]=t.title}),p=G.tools.obj.merge(p,l),g.cols=o.concat(g.cols,d),o.forEach(function(t,e){n.push(t.title)}),e=n.join("-"),g.dataTemp[e])for(var i in p)"number"==typeof p[i]&&("number"==typeof g.dataTemp[e][i]?g.dataTemp[e][i]+=p[i]:g.dataTemp[e][i]=p[i]);else g.dataTemp[e]=p;y=0})}(i,o,t.data,g.colFormula),l.cols=e.concat(l.cols),l.data=[],g.dataTemp)l.data.push(g.dataTemp[a]);if(1<o.length)n={title:"汇总",name:"stat_SUM",children:[]},o.forEach(function(t,e){n.children.push({title:t.title+"汇总",name:t.name+"_SUM"})});else{var s="stat_SUM";1===o.length&&(s=o[0].name+"_SUM"),n={title:"汇总",name:s}}return l.cols.push(n),l}return{create:function(t){var e,n=i(t);return(e=n).cols=g.multiTable.createThead(e.cols),e.colsIndex=g.cols,e.data=e.data,n=e}}}(this),this.multiTable=function(t){var o=[];function i(t,e){void 0===e&&(e=[]);var r=[],o=[];return t.forEach(function(t,e){var n={colspan:function t(e){if(e.children){for(var n=0,i=0,r=e.children;i<r.length;i++)n+=t(r[i]);return n}return 1}(t)};for(var i in t)t.hasOwnProperty(i)&&("children"===i&&t[i]?o=o.concat(t[i]):n[i]=t[i]);r.push(n)}),e.push(r),0===o.length?e:i(o,e)}return{createThead:function(t){var e,r,n=i(t);return r=(e=n).length,e.forEach(function(t,i){t.forEach(function(t,e){if(1===t.colspan){var n=r-i;delete t.colspan,1!==n&&(t.rowspan=n)}})}),n=e},createTbody:function(t,e){var n,i,r;return o=[],n=t,i=e,void 0===r&&(r=[]),console.log("initTbody",n,i),o}}}(),this.abcFunc={create:function(t){var e,n,i,r,o,l,a,s,h,u,c;return{cols:function(t,e){for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];if(t===o.name){var l=o.title;n.push({title:l+"类",name:"classify"}),n.push({title:l+"项数",name:"group"}),n.push({title:l+"占比",name:"ratio"}),n.push({title:l+"总价占比",name:"total_ratio"}),n.push({title:l+"总价均值",name:"total_avg"})}}return n}(t.val,t.cols),data:(e=t,n=e.row,i=e.val,r=e.a,o=e.b,e.cols,l=e.data,a=0,s=0,h=0,u=[],c=[{classify:"A类",group:0,ratio:0,total_ratio:0,total_avg:0},{classify:"B类",group:0,ratio:0,total_ratio:0,total_avg:0},{classify:"C类",group:0,ratio:0,total_ratio:0,total_avg:0}],l.forEach(function(t,e){u.push([t[n],t[i]]),a+=t[i],s++}),u.sort(function(t,e){return e[1]-t[1]}),u.forEach(function(t,e){var n=2;(h+=t[1]/a*100)<r&&(n=0),r<=h&&h<o&&(n=1),c[n].group=c[n].group+1,c[n].total_ratio=h,c[n].total_avg=c[n].total_avg+t[1]}),c[2].total_ratio=(c[2].total_ratio-parseFloat(c[1].total_ratio)).toFixed(2)+"%",c[1].total_ratio=(c[1].total_ratio-parseFloat(c[0].total_ratio)).toFixed(2)+"%",c[0].total_ratio=c[0].total_ratio.toFixed(1)+"%",c.forEach(function(t,e){c[e].total_avg=(c[e].total_avg/c[e].group).toFixed(2),"NaN"===c[e].total_avg&&(c[e].total_avg=0),c[e].ratio=(c[e].group/s*100).toFixed(2)+"%"}),c)}}}}return l.prototype.crossTab=function(t){var e;return e=G.tools.obj.merge({colsSum:!1,col:[],row:[],val:[],cols:[],data:[]},t),this.crossFunc.create(e)},l.prototype.abc=function(t){var e;return e=G.tools.obj.merge({row:[],val:[],a:65,b:85,cols:[],data:[]},t),this.abcFunc.create(e)},l.math={_dataFilter:function(t){if(!Array.isArray(t))return!1;for(var e=t.length,n=0;n<e;n++)""===t[n]||isNaN(t[n])||null===t[n]?(t.splice(n,1),n-=1,e-=1):t[n]=Number(t[n]);return 0===t.length&&(t[0]=0),t},sum:function(t){if(!1===(t=l.math._dataFilter(t)))return!1;for(var e=0,n=t.length,i=0;i<n;i++)e+=t[i];return e},avg:function(t){if(!1===(t=l.math._dataFilter(t)))return!1;var e=t.length;return l.math.sum(t)/e},max:function(t){return!!(t=l.math._dataFilter(t))&&Math.max.apply(Math,t)},min:function(t){return!!(t=l.math._dataFilter(t))&&Math.min.apply(Math,t)},stDev:function(t){if(!1===(t=l.math._dataFilter(t)))return!1;for(var e=t.length,n=new Array(e),i=0;i<e;i++){var r=t[i]-l.math.avg(t);n[i]=Math.pow(r,2)}var o=l.math.sum(n);return Math.sqrt(o/e)},nullCount:function(t){if(!Array.isArray(t))return!1;for(var e=0,n=0;n<t.length;n++)(""===t[n]||isNaN(t[n])||null===t[n])&&e++;return e},percent:function(t,e){return!1!==(t=l.math._dataFilter(t))&&l.math.sum(t)/e},groupPercent:function(t){if(!(t=l.math._dataFilter(t)))return!1}},l}();e.Statistic=n}),define("Validate",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={number:"{{title}}必须是数字",maxLength:"{{title}}的最大长度不超过{{value}}",maxValue:"{{title}}超过最大值{{value}}或者为非数字",minLength:"{{title}}小于最小长度{{value}}或者为非字符串",minValue:"{{title}}小于最小值{{value}}或者为非数字",requieredFlag:"{{title}}为空",regExp:"{{title}}匹配正则规则{{value}}"},s={maxLength:function(t,e){return 0===e||("string"!=typeof t||!(t.length>e))},maxValue:function(t,e){return"number"!=typeof t||t<e},minLength:function(t,e){return 0===e||("string"!=typeof t||!(t.length<e))},minValue:function(t,e){return"number"!=typeof t||!(t<e)},requieredFlag:function(t,e){return!e||null!=t&&""!==t},regExp:function(t,e){return null!=t.match(new RegExp(e))},number:function(t,e){return!isNaN(t)}},n=function(){function t(){this.name2Rules={}}return t.prototype.add=function(t,e){this.name2Rules[t]=e},t.prototype.get=function(t){return this.name2Rules[t]},t.prototype.start=function(t){var e=null;for(var n in this.name2Rules)for(var i=0,r=this.name2Rules[n];i<r.length;i++){var o=r[i];if((void 0!==t[n]||"requieredFlag"===o.rule)&&!s[o.rule](t[n],o.value)){var l=o.errMsg?o.errMsg:a[o.rule];l=G.tools.str.parseTpl(l,{title:o.title,value:o.value}),null===e&&(e={}),e[n]={errMsg:l,rule:o.rule};break}}return e},t}();e.Validate=n});