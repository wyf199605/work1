define("Inputs",["require","exports","Modal","Toast","BwRule"],function(t,e,l,u,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=G.d,c=BW.CONF,n=function(){function t(t){this.para=t,this.p=t,this.eventInit(t)}return t.prototype.matchPass=function(t,e){var n=this.url?this.url:t.dataAddr.dataAddr;-1<n.indexOf("?")?n+="&":n+="?";var a=c.siteUrl+n+t.fieldName.toLowerCase()+"="+e,s=this;!function o(t){r.BwRule.Ajax.fetch(t).then(function(t){var e=t.response,n=e.body.bodyList[0].category,a=n.type,r=n.showText;switch(s.url=n.url,a){case 0:e.data&&(s.p.table.data=e.data),i();break;case 1:s.p.table.labelPrint.show(s.p.table.labelBtn.wrapper,n.printList,function(){o(c.siteUrl+s.url)}),i();break;case 2:l.Modal.alert(r);break;case 3:l.Modal.confirm({msg:r,btns:["取消","确定"],callback:function(t){!0===t?o(c.siteUrl+s.url):s.url=null}});break;case 4:o(c.siteUrl+s.url),i()}function i(){s.m&&s.m.destroy(),s.m=new u.Toast({duration:0,type:"simple",isClose:!0,position:"bottom",content:r,container:s.para.container})}a||0===a||i()})}(a)},t.prototype.eventInit=function(i){var o=this;i.inputs.forEach(function(n){var t=s.closest(i.container,".mobileTableWrapper"),a="",r=null,e=n.timeout;s.on(t,"keydown",function(t){a+=t.key,r&&clearTimeout(r),r=setTimeout(function(){var t=a.length;if(n.minLength<=t&&t<=n.maxLength){var e=o.regExpMatch(i.inputs,a);e&&o.matchPass(e,a)}r=null,a=""},e)})})},t.prototype.regExpMatch=function(t,a){var r;return t.forEach(function(n){n.fieldRegex&&"2"===n.inputType&&n.fieldRegex.split(";").forEach(function(t){var e=a.match(t);e&&e[0]===a&&(r=n)})}),r},t}();e.Inputs=n});