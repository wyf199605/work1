define(["require","exports","photoSwipe","photoSwipeUi"],function(e,t,p,y){"use strict";var h=BW.sys;return function(){var e=JSON.parse(window.localStorage.getItem("imgRotateData")),t=e.img,n=t.length,o=document.querySelector(".pswp"),r=document.getElementById("headerBar"),a=r.querySelector(".imgPage"),i=document.getElementById("footerBar"),l=document.getElementById("imgPage"),s=document.getElementById("maxPageNum1"),d=i.querySelector("input[type=range]"),c=i.querySelector(".mui-input-range"),u=e.page;if((1===n&&void 0===u||!1===u)&&(c.style.display="none",a.style.display="none"),t[0]){var g=new Image,m=[];g.src=t[0],g.onload=function(){var e;m=t.map(function(e){return{h:g.height,w:g.width,src:e}}),(e=new p(o,y,m,{index:0,pinchToClose:!1,closeOnScroll:!1,closeOnVerticalDrag:!1,mouseUsed:!1,escKey:!1,arrowKeys:!1,history:!1,modal:!1,clickToCloseNonZoomable:!1,closeElClasses:[],fullscreenEl:!1,shareEl:!1,zoomEl:!1,arrowEl:!1,captionEl:!1})).init(),e.listen("afterChange",function(){d.value=this.getCurrentIndex()+1,l.innerHTML=this.getCurrentIndex()+1}),d.addEventListener("change",function(){e.goTo(parseInt(this.value)-1),l.innerHTML=this.value})}}r.querySelector(".mui-title").textContent=e.title,1<n&&(i.querySelector("#maxPageNum").textContent=n,d.setAttribute("max",n),s.textContent=n),e.downAddr&&(i.classList.add("download"),i.querySelector('[data-action="download"]').addEventListener("tap",function(){h.window.download(e.downAddr)})),o.addEventListener("tap",function(){r.classList.toggle("hide"),i.classList.toggle("hide")})}});