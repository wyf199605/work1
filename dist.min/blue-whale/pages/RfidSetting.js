define("RfidSetting",["require","exports","Modal","MbPage"],function(e,n,r,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=G.Component,d=G.d,a=function(r){function e(){var e=this,n=new o({});return e=r.call(this,{isShow:!0,height:"100%",width:"100%",isOnceDestroy:!0,className:"modal-mbPage",position:"down",onClose:function(){n.rfidClose()}})||this,new t.MbPage({container:e.bodyWrapper,body:n.wrapper,title:"rfid配置",left:[{icon:"mui-icon-left-nav",iconPre:"mui-icon",onClick:function(){e.isShow=!1}}]}),e.rfidSetting=n,e}return __extends(e,r),e.prototype.destroy=function(){r.prototype.destroy.call(this),this.rfidSetting.destroy()},e}(r.Modal);n.RfidSettingModal=a;var o=function(r){function e(e){var n=r.call(this,e)||this;return n.powerEl=d.query(".power",n.wrapper),n.frequenEl=d.query("#frequency",n.wrapper),n.rfidcs=d.query(".rfid-setting-btn>input",n.wrapper),n.rfidcl=d.query(".rfid-clear>input",n.wrapper),n.jobReduce=d.query(".rfid-job-reduce",n.wrapper),n.restReduce=d.query(".rfid-rest-reduce",n.wrapper),n.jobInput=d.query(".rifd-job-input",n.wrapper),n.restInput=d.query(".rifd-rest-input",n.wrapper),n.jobAdd=d.query(".rfid-job-add",n.wrapper),n.restAdd=d.query(".rfid-rest-add",n.wrapper),n.rfidOpen(),n.getband(),n.getMinMaxBand(),n.rfidsave(),n.clearCook(),n.keyupReduce(),n.keyupAdd(),n}return __extends(e,r),e.prototype.wrapperInit=function(e){return h("form",{className:"rfid-setting-page"},h("div",{className:"rfid-power"},h("span",null,"输出功率:"),h("div",null,h("select",{name:"power",class:"power"},h("option",{value:"0"},"--请选择--"),h("option",{value:"功率"},"--功率--")),"dMB")),h("div",{className:"rfid-frequency"},h("span",null,"输出频率:"),h("select",{name:"frequency",id:"frequency"},h("option",{value:"0"},"--请选择--"),h("option",{value:"哈哈"},"--请选择--"))),h("div",{className:"rfid-model"},h("span",null,"蜂鸣模式:"),h("div",null,h("label",null,"连续 ",h("input",{name:"mode",type:"radio",value:"lianxu"})),h("label",null,"不连续 ",h("input",{name:"mode",type:"radio",value:"nolianxu"})))),h("div",{className:"rfid-job"},h("span",null,"工作模式:"),h("div",{className:"rfid-number"},h("div",{className:"rfid-reduce rfid-job-reduce"},"-"),h("input",{type:"number",className:"rifd-job-input"}),h("div",{className:"rfid-add rfid-job-add"},"+")),"MS"),h("div",{className:"rfid-rest"},h("span",null,"休息模式:"),h("div",{className:"rfid-number"},h("div",{className:"rfid-reduce rfid-rest-reduce"},"-"),h("input",{type:"number",className:"rifd-rest-input"}),h("div",{className:"rfid-add rfid-rest-add"},"+")),"MS"),h("div",{className:"rfid-gun"},h("span",null,"盘点棒:"),h("div",{class:"rfid-gun-set"},h("select",{name:"rod",id:"rod",class:"rfid-rod"},h("option",{value:"0",class:"rod-f"},"否"),h("option",{value:"1",class:"rod-t"},"是")))),h("div",{className:"rfid-setting-btn"},h("input",{type:"button",value:"保存"})),h("div",{className:"rfid-setting-btn rfid-clear"},h("input",{type:"button",value:"清除缓存"})))},e.prototype.getParam=function(){var i=this;G.Shell.inventory.rfidGetParam({},function(e){var n=e.data;i.powerEl.innerHTML="",i.frequenEl.innerHTML="";var r=h("option",{value:n.power},n.power);i.powerEl.appendChild(r);var t=h("option",{value:n.frequencyMode},n.frequencyMode);i.frequenEl.appendChild(t)})},e.prototype.rfidOpen=function(){var r=this,t=this,e=d.query(".rfid-rod",t.wrapper),n=d.queryAll("option",e),i=G.Shell.inventory.defaultRfidDevice("get",0);G.tools.isNotEmpty(i)&&0===i.data?n[0].selected=!0:n[1].selected=!0,G.Shell.inventory.getPwn(function(e){var n=e.data;n&&(t.jobInput.value=n.workTime,t.restInput.value=n.waitTime,r.getParam())})},e.prototype.getband=function(){var n=this;G.Shell.inventory.getBand({},function(e){var t=e.data;d.on(n.frequenEl,"focus",function(){var e=document.createDocumentFragment();this.innerHTML="";for(var n=0;n<t.length;n++){var r=h("option",{value:t[n]},t[n]);e.appendChild(r)}this.appendChild(e)})})},e.prototype.getMinMaxBand=function(){var a=this;G.Shell.inventory.getMinMaxBand({},function(e){var i=e.data;d.on(a.powerEl,"click",function(e){e.stopPropagation();var n=document.createDocumentFragment();a.powerEl.innerHTML="";for(var r=0;r<i.length;r++){var t=h("option",{value:i[r]},i[r]);n.appendChild(t)}a.powerEl.appendChild(n)})})},e.prototype.rfidsave=function(){var o=this;d.on(this.rfidcs,"click",function(){var e=o.powerEl.value,n=o.frequenEl.value,r=o.jobInput.value,t=o.restInput.value,i={band:n,powerBand:e},a=d.query(".rfid-rod",o.wrapper);d.queryAll("option",a);G.Shell.inventory.rfidSetParam(i,function(e){if("成功"===e.data){G.Shell.inventory.setPwm({workTime:r,waitTime:t},function(e){});var n=parseInt(a.value);G.Shell.inventory.defaultRfidDevice("set",n)}})})},e.prototype.clearCook=function(){d.on(this.rfidcl,"click",function(){G.Shell.inventory.clearData("",function(e){})})},e.prototype.rfidClose=function(){G.Shell.inventory.rfidClose(function(e){})},e.prototype.keyupReduce=function(){var n=this;d.on(this.jobReduce,"click",function(){var e=n.jobInput.value;e&&0<e&&(n.jobInput.value=parseInt(e)-1)}),d.on(this.restReduce,"click",function(){var e=n.restInput.value;e&&0<e&&(n.restInput.value=parseInt(e)-1)})},e.prototype.keyupAdd=function(){var n=this;d.on(this.jobAdd,"click",function(){var e=n.jobInput.value;e&&0<e&&(n.jobInput.value=parseInt(e)+1)}),d.on(this.restAdd,"click",function(){var e=n.restInput.value;e&&0<e&&(n.restInput.value=parseInt(e)+1)})},e}(i);n.RfidSetting=o});