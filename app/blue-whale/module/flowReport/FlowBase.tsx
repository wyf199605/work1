/// <amd-module name="FlowBase"/>
import {FlowReport} from "./FlowReport";
import {ListItemDetail} from "../listDetail/ListItemDetail";
import {UploadImages} from "../uploadModule/uploadImages";
import {Accessory} from "../uploadModule/accessory";

export class FlowBase {
    constructor(para) {
        switch (para.uiType) {
            case 'flow': {
                // new FlowReport(para);
                // let json = "{\"uiType\":\"view\",\"caption\":\"收件箱详情\",\"body\":{\"subButtons\":[{\"signId\":\"cycle\",\"signName\":\"圆圈\",\"signType\":\"0\",\"caption\":\"新增\",\"title\":\"新增\",\"icon\":\"mui-icon mui-icon-compose\",\"actionAddr\":{\"type\":\"none\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/ui/insert/n1174_data-4\",\"varType\":0,\"addrType\":false,\"commitType\":1},\"buttonType\":0,\"subType\":\"\",\"openType\":\"newwin\",\"hintBeforeAction\":false,\"refresh\":0,\"multiselect\":0,\"haveRoll\":false}],\"elements\":[{\"caption\":\"收件箱详情\",\"fields\":[{\"name\":\"MAILID\",\"caption\":\"邮件编号\",\"noModify\":true,\"noEdit\":true,\"noShow\":true,\"noAdd\":true,\"atrrs\":{\"fieldName\":\"MAILID\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"邮件编号\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":1,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"SHO_ID\",\"caption\":\"店号\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"SHO_ID\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"店号\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":7,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":10,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ;\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"DEPART\",\"caption\":\"所在部门\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"DEPART\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"所在部门\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":3,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":12,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"elementType\":\"value\",\"dataAddr\":{\"type\":\"none\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/value/n1092_data-3/o-value-60100\",\"varType\":0,\"addrType\":false,\"commitType\":1},\"supportLink\":false},{\"name\":\"AUTHORID\",\"caption\":\"作者编号\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"AUTHORID\",\"trueExpr\":\"\",\"defaultValue\":\"CMS3\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"作者编号\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":1,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"SENDER\",\"caption\":\"发件人\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"SENDER\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"发件人\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":1,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"action-hyper-1\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":true,\"link\":{\"type\":\"table\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/ui/action/n1092_data-3/action-hyper-1\",\"varList\":[{\"varName\":\"AUTHORID\"}],\"varType\":0,\"addrType\":false,\"commitType\":1}},{\"name\":\"RECEIVERID\",\"caption\":\"收件人编号\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"RECEIVERID\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"收件人编号\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":1,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":1,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":20,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ;\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"RECEIVER\",\"caption\":\"收件人\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"RECEIVER\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"收件人\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":30,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"JOBNAME\",\"caption\":\"岗位\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"JOBNAME\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"岗位\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":7,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":30,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"TITLE\",\"caption\":\"标题\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"TITLE\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"标题\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":1,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":0,\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":20},\"supportLink\":false},{\"name\":\"ATTACHNAME\",\"caption\":\"附件\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"ATTACHNAME\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"附件\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":1,\"dataType\":\"43\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":30,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":true,\"link\":{\"type\":\"file\",\"needGps\":0,\"dataAddr\":\"/rest/attachment/download/file?name_field=ATTACHNAME&md5_field=FILE_ID&app_id=app_sanfu_retail&sys_version_id=null\",\"varList\":[{\"varName\":\"FILE_ID\"},{\"varName\":\"ATTACHNAME\"}],\"varType\":0,\"addrType\":false,\"commitType\":1}},{\"name\":\"URGENT\",\"caption\":\"加急\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"URGENT\",\"trueExpr\":\"\",\"defaultValue\":\"0\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"加急\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"17\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"CREATETIME\",\"caption\":\"创建时间\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"CREATETIME\",\"trueExpr\":\"\",\"defaultValue\":\"%date%\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"创建时间\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":4,\"requieredFlag\":0,\"noEdit\":1,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"12\",\"noCopy\":0,\"displayFormat\":\"yyyy-MM-dd HH:mm:ss\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"FETCHTIME\",\"caption\":\"接收时间\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"FETCHTIME\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"接收时间\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":8,\"requieredFlag\":0,\"noEdit\":1,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"12\",\"noCopy\":0,\"displayFormat\":\"yyyy-MM-dd HH:mm:ss\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false},{\"name\":\"CONTENT\",\"caption\":\"内容\",\"noModify\":true,\"noEdit\":true,\"noShow\":false,\"noAdd\":false,\"atrrs\":{\"fieldName\":\"CONTENT\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"内容\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":3,\"requieredFlag\":1,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"30\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":0,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":100},\"supportLink\":false},{\"name\":\"FILE_ID\",\"caption\":\"MD5\",\"noModify\":true,\"noEdit\":true,\"noShow\":true,\"noAdd\":true,\"atrrs\":{\"fieldName\":\"FILE_ID\",\"trueExpr\":\"\",\"defaultValue\":\"\",\"minLength\":0,\"noSort\":0,\"imeOpen\":0,\"caption\":\"MD5\",\"inputHint\":\"\",\"allowScan\":0,\"noSum\":0,\"readOnlyFlag\":0,\"multiValueFlag\":0,\"checkMessage\":\"\",\"minValue\":\"\",\"checkExpress\":\"\",\"dataTypeFlag\":0,\"requieredFlag\":0,\"noEdit\":0,\"valueListType\":0,\"falseExpr\":\"\",\"valueLists\":\"\",\"editFormt\":\"\",\"maxValue\":\"\",\"dataType\":\"\",\"noCopy\":0,\"displayFormat\":\"\",\"imeCare\":0,\"displayWidth\":32,\"invalidChars\":\"\",\"hyperRes\":\"\",\"validChars\":\"\",\"alignment\":0,\"maxLength\":0},\"supportLink\":false}],\"subButtons\":[{\"caption\":\"删除\",\"title\":\"删除\",\"icon\":\"icon_delete\",\"actionAddr\":{\"type\":\"none\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/list/n1092_data-3?nopage=true&mailid=ZBZX0000487\",\"varList\":[{\"varName\":\"CURRENTUSERID\"}],\"varType\":3,\"addrType\":false,\"commitType\":1},\"buttonType\":3,\"subType\":\"delete\",\"openType\":\"none\",\"hintBeforeAction\":true,\"refresh\":3,\"multiselect\":2,\"haveRoll\":false},{\"selectionFlag\":0,\"caption\":\"查看收件人\",\"title\":\"查看收件人\",\"icon\":\"EXPRDATA\",\"actionAddr\":{\"type\":\"table\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/ui/action/n1092_data-3/action-374\",\"varList\":[{\"varName\":\"MAILID\"}],\"varType\":0,\"addrType\":false,\"commitType\":1},\"buttonType\":0,\"subType\":\"action\",\"openType\":\"newwin\",\"hintBeforeAction\":false,\"refresh\":1,\"multiselect\":1,\"haveRoll\":false},{\"caption\":\"转发\",\"title\":\"转发\",\"icon\":\"TRANSMIT\",\"actionAddr\":{\"type\":\"panel\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/ui/associate/n1092_data-3/associate-3\",\"varList\":[{\"varName\":\"MAILID\"}],\"varType\":0,\"addrType\":false,\"commitType\":1},\"buttonType\":0,\"subType\":\"associate\",\"openType\":\"newwin\",\"hintBeforeAction\":false,\"refresh\":0,\"multiselect\":1,\"haveRoll\":false},{\"caption\":\"回复所有\",\"title\":\"回复所有\",\"icon\":\"REPLYMAIL\",\"actionAddr\":{\"type\":\"panel\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/ui/associate/n1092_data-3/associate-90000\",\"varList\":[{\"varName\":\"MAILID\"}],\"varType\":0,\"addrType\":false,\"commitType\":1},\"buttonType\":0,\"subType\":\"associate\",\"openType\":\"newwin\",\"hintBeforeAction\":false,\"refresh\":0,\"multiselect\":1,\"haveRoll\":false},{\"caption\":\"回复\",\"title\":\"回复\",\"icon\":\"REPLYMAIL\",\"actionAddr\":{\"type\":\"panel\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/ui/associate/n1092_data-3/associate-1\",\"varList\":[{\"varName\":\"MAILID\"}],\"varType\":0,\"addrType\":false,\"commitType\":1},\"buttonType\":0,\"subType\":\"associate\",\"openType\":\"newwin\",\"hintBeforeAction\":false,\"refresh\":0,\"multiselect\":1,\"haveRoll\":false}],\"scannableTime\":0,\"dataAddr\":{\"type\":\"none\",\"needGps\":0,\"dataAddr\":\"/app_sanfu_retail/null/list/n1092_data-3?nopage=true&mailid=ZBZX0000487\",\"varType\":0,\"addrType\":false,\"commitType\":1},\"updatefileData\":{\"type\":\"none\",\"needGps\":0,\"dataAddr\":\"/rest/attachment/update/filedata?\",\"varList\":[{\"varName\":\"FILE_ID\"}],\"varType\":0,\"addrType\":false,\"commitType\":1}}]}}"
                // let jsonObj = JSON.parse(json);
                // new ListItemDetail({
                //     uiType: jsonObj.uiType,
                //     fm: {
                //         caption: jsonObj.body.elements[0].caption,
                //         fields: jsonObj.body.elements[0].fields,
                //         subButtons: jsonObj.body.elements[0].subButtons,
                //         defDataAddrList: jsonObj.body.elements[0].defDataAddrList || [],
                //         dataAddr: jsonObj.body.elements[0].dataAddr,
                //         updatefileData: jsonObj.body.elements[0].updatefileData
                //     },
                //     dom:para.dom
                // })

                new UploadImages({
                    uploadUrl: '',
                    nameField: '',
                    container: para.dom
                })

                new Accessory({
                    uploadUrl: BW.CONF.ajaxUrl.fileUpload,
                    nameField: '',
                    container: para.dom
                })
            }
                break;
        }
    }
}